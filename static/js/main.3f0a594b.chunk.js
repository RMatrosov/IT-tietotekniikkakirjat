(this.webpackJsonpkirjakauppa=this.webpackJsonpkirjakauppa||[]).push([[0],{179:function(e,t,a){},308:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(15),r=a.n(c),o=(a(179),a(342)),l=a(359),s=a(361),d=a(351),u=a(19),j=a(344),b=a(346),m=a(348),p=a(347),h=a(310),O=a(349),x=a(350),f=a(35),g=Object(o.a)({root:{height:"100%",display:"flex",flexDirection:"column"},media:{width:"100%",minHeight:260,maxWidth:"100%",margin:0,objectFit:"fill"},title:{marginTop:10,color:"#424242"},price:{fontSize:"0.87rem",color:"#424242"},type:{fontSize:"0.87rem",color:"#424242"},cardContext:{margin:0,padding:10},link:{textDecoration:"none"}}),y="SET_LOADED",v="SET_BOOKS",k="ADD_BOOK_CART",N="REMOVE_CART_ITEM",C="PLUS_CART_ITEM",S="MINUS_CART_ITEM",T="SET_SORT_BY",w="SET_TOTAL_ITEM_COUNT",P="SET_CURRENT_PAGE",B="SEARCH_BOOKS",_=a(2),E=function(e){var t=g(),a=Object(u.b)(),n=e.card.title;function i(e){a({type:k,payload:e})}return Object(_.jsxs)(j.a,{className:t.root,children:[Object(_.jsx)(f.b,{to:"img/".concat(n),className:t.link,children:Object(_.jsxs)(b.a,{children:[Object(_.jsx)(p.a,{component:"img",alt:"Contemplative Reptile",height:"260",image:"https:".concat(e.card.imgSmall),title:"Contemplative Reptile",className:t.media}),Object(_.jsxs)(m.a,{className:t.cardContext,children:[Object(_.jsx)(h.a,{gutterBottom:!0,variant:"h6",component:"h2",className:t.title,children:n}),Object(_.jsx)(h.a,{variant:"body2",color:"textSecondary",component:"p",className:t.type,children:e.card.type}),Object(_.jsxs)(h.a,{gutterBottom:!0,variant:"h6",component:"h6",className:t.price,children:[e.card.price," \u20ac"]})]})]})}),Object(_.jsx)(O.a,{children:Object(_.jsx)(x.a,{fullWidth:!0,onClick:function(){return i(e.card)},variant:"outlined",children:"Lis\xe4\xe4 koriin"})})]})},I=a(352),L=a(362),R=Object(o.a)((function(e){return{btnGroup:{marginTop:40,alignSelf:"center",marginBottom:40,"& > *":{marginTop:e.spacing(2)}}}})),q=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.paginate})),a=t.totalItemCount,n=t.currentPage,i=t.defaultItemsCount,c=Math.ceil(a/i),r=R();return Object(_.jsx)("div",{className:r.btnGroup,children:Object(_.jsx)(L.a,{count:c,page:n,onChange:function(t,a){e(function(e){return{type:P,payload:e}}(a))},color:"primary"})})},D=function(e){var t=e.items,a=Object(u.c)((function(e){return e.books.isLoaded})),n=Object(u.c)((function(e){return e.search})),i=t.filter((function(e){return Object.keys(e).some((function(t){return e[t].toString().toLowerCase().includes(n.search.toString().toLowerCase())}))}));return Object(_.jsxs)(s.a,{style:{display:"flex",flexDirection:"column"},children:[Object(_.jsx)(d.a,{container:!0,direction:"row",justifyContent:"space-evenly",spacing:6,children:a?i.map((function(e){return Object(_.jsx)(d.a,{item:!0,xs:12,sm:6,md:4,children:Object(_.jsx)(E,{card:e})},e.id)})):Array(6).fill(0).map((function(e,t){return Object(_.jsx)(I.a,{variant:"rect",width:270,height:280},t)}))}),Object(_.jsx)(q,{})]})},F=a(364),W=a(154),A=a.n(W),M=a(354),G=a(355),H=a(311),K=a(153),U=a.n(K),J=a(25),V=a(16),$=a(5),z=a(353),X=Object(o.a)((function(e){return{root:{flexGrow:1,paddingTop:5},shopCard:{color:"white"},appBar:{backgroundColor:"#424242"},title:Object(J.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(J.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(V.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(V.a)(e.palette.common.white,.25)},marginLeft:0,width:"auto"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"50%"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(J.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),Y=Object($.a)((function(e){return{badge:{right:-3,top:13,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}}}))(z.a),Q=function(){var e=X(),t=Object(u.b)();function a(e){t(function(e){return{type:B,payload:e}}(e))}var n=Object(u.c)((function(e){return e.cart})).totalCount;return Object(_.jsx)("div",{className:e.root,children:Object(_.jsx)(M.a,{position:"static",className:e.appBar,children:Object(_.jsxs)(G.a,{children:[Object(_.jsx)(h.a,{className:e.title,variant:"h6",noWrap:!0,children:"IT tietotekniikkakirjat"}),Object(_.jsx)(f.b,{to:"/cart",children:Object(_.jsx)(H.a,{"aria-label":"cart",children:Object(_.jsx)(Y,{overlap:"rectangular",badgeContent:n,color:"secondary",children:Object(_.jsx)(U.a,{className:e.shopCard})})})}),Object(_.jsxs)("div",{className:e.search,children:[Object(_.jsx)("div",{className:e.searchIcon,children:Object(_.jsx)(A.a,{})}),Object(_.jsx)(F.a,{onChange:function(e){return a(e.target.value)},placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}})]})]})})})},Z=a(363),ee=a(365),te=a(357),ae=a(356),ne=Object(o.a)((function(e){return{root:{marginBottom:40,border:"1px solid #616161",width:"100%"},label:{margin:0,width:"20%"}}})),ie=function(e){var t=e.onSortBy,a=ne();return Object(_.jsx)(ae.a,{component:"fieldset",className:a.root,children:Object(_.jsx)(ee.a,{row:!0,"aria-label":"position",name:"position",defaultValue:"all",children:[{name:"Kaikki",type:"",order:"",label:"all"},{name:"Hinta, halvin ensin",type:"price",order:"asc",label:"low"},{name:"Hinta, kallein ensin",type:"price",order:"desc",label:"high"},{name:"A-\xd6, nimen mukaan",type:"title",order:"asc",label:"a-o"},{name:"\xd6-A, nimen mukaan",type:"title",order:"desc",label:"o-a"}].map((function(e,n){return Object(_.jsx)(te.a,{value:e.label,control:Object(_.jsx)(Z.a,{color:"default"}),label:e.name,labelPlacement:"bottom",onChange:function(){return t(e)},className:a.label},"".concat(e.type,"_").concat(n))}))})})},ce=a(14),re=a.n(ce),oe=a(32),le=a(90),se=a.n(le),de=function(e){return{type:v,payload:e}},ue=a(18),je=Object(o.a)((function(e){return{root:{height:"100vh",position:"relative",paddingLeft:150},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},cover:{width:500,height:700},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},link:{textDecoration:"none",position:"absolute",right:0,top:0}}})),be=function(e){var t=function(e,t){return e.find((function(e){return e.title===t}))}(e.items,Object(ue.g)().title),a=je();return Object(_.jsx)(_.Fragment,{children:t?Object(_.jsxs)(j.a,{className:a.root,children:[Object(_.jsx)("div",{className:a.details,children:Object(_.jsxs)(m.a,{className:a.content,children:[Object(_.jsx)(h.a,{component:"h5",variant:"h5",children:t.author}),Object(_.jsx)(h.a,{variant:"subtitle1",color:"textSecondary",children:t.type}),Object(_.jsxs)(h.a,{variant:"subtitle2",color:"textSecondary",children:[t.price," \u20ac"]})]})}),Object(_.jsx)(p.a,{className:a.cover,image:"https:".concat(t.imgMedium),title:t.title}),Object(_.jsx)(f.b,{to:"/",className:a.link,children:Object(_.jsx)(x.a,{variant:"contained",color:"primary",children:"Back"})})]}):""})},me=a(159),pe=a.n(me),he=a(160),Oe=a.n(he),xe=a(158),fe=a.n(xe),ge=a(161),ye=a.n(ge),ve=a(9),ke=a(26),Ne=a(50),Ce=a(164),Se=a(58),Te=a(358),we=a(360),Pe=Object(o.a)((function(e){return{form:{margin:15,display:"flex",flexDirection:"column"},box:{display:"flex",justifyContent:"space-between"},TextField:{width:"48%",marginTop:20,marginBottom:20},fullWidth:{marginTop:20},submitBtn:{marginTop:20,width:250,height:60,alignSelf:"center"},email:{marginTop:20,marginBottom:20}}})),Be=Se.b().shape({firstName:Se.c().matches(/^([^0-9]*)$/,"First name should not contain numbers").required("Sy\xf6t\xe4 etunimi"),lastName:Se.c().matches(/^([^0-9]*)$/,"Last name should not contain numbers").required("Sy\xf6t\xe4 sukunimi"),address:Se.c().required("Sy\xf6t\xe4 osoite"),post:Se.a().required("Sy\xf6t\xe4 postinumero"),city:Se.c().matches(/^([^0-9]*)$/,"Last name should not contain numbers").required("Sy\xf6t\xe4 kaupunki")}),_e=function(e){var t,a,i,c,r,o=e.items,l=Pe(),d=Object(Ne.d)({mode:"onBlur",resolver:Object(Ce.a)(Be)}),u=d.register,j=d.handleSubmit,b=d.formState.errors,m=Object(n.useState)(!1),p=Object(ke.a)(m,2),O=p[0],f=p[1],g=Object(n.useState)(!1),y=Object(ke.a)(g,2),v=y[0],k=y[1];return Object(_.jsxs)("form",{onSubmit:j((function(e){alert(JSON.stringify(e)),console.log(o)})),className:l.form,children:[Object(_.jsx)(h.a,{component:"h3",variant:"h6",children:"Toimitusosoite"}),Object(_.jsxs)(s.a,{children:[Object(_.jsx)(te.a,{control:Object(_.jsx)(Te.a,{checked:v,onChange:function(){return k(!v)},name:"hasEmail",inputProps:{"aria-label":"primary checkbox"}}),label:"S\xe4hk\xf6postiosoite ?"}),Object(_.jsx)(te.a,{control:Object(_.jsx)(Te.a,{checked:O,onChange:function(){return f(!O)},name:"hasPhone",inputProps:{"aria-label":"primary checkbox"}}),label:"Puhelin ?"})]}),v&&Object(_.jsx)(we.a,{variant:"outlined",label:"S\xe4hk\xf6postiosoite",fullWidth:!0,type:"email",placeholder:"S\xe4hk\xf6postiosoite",className:l.email}),O&&Object(_.jsx)(we.a,{variant:"outlined",label:"Puhelin",fullWidth:!0}),Object(_.jsxs)(s.a,{className:l.box,children:[Object(_.jsx)(we.a,Object(ve.a)({variant:"outlined",label:"Etunimi",id:"firstName",multiline:!0,className:l.TextField,placeholder:"Etunimi",type:"text",error:!!b.firstName,helperText:null===b||void 0===b||null===(t=b.firstName)||void 0===t?void 0:t.message},u("firstName",{required:"Required"}))),Object(_.jsx)(we.a,Object(ve.a)({variant:"outlined",label:"Sukunimi",multiline:!0,className:l.TextField,id:"lastName",placeholder:"Sukunimi",type:"text",error:!!b.lastName,helperText:null===b||void 0===b||null===(a=b.lastName)||void 0===a?void 0:a.message},u("lastName",{required:"Required"})))]}),Object(_.jsx)(we.a,Object(ve.a)({variant:"outlined",label:"Osoite",fullWidth:!0,className:l.fullWidth,error:!!b.address,helperText:null===b||void 0===b||null===(i=b.address)||void 0===i?void 0:i.message},u("address",{required:"Required"}))),Object(_.jsxs)(s.a,{className:l.box,children:[Object(_.jsx)(we.a,Object(ve.a)({variant:"outlined",label:"Postinumero",className:l.TextField,error:!!b.post,helperText:null===b||void 0===b||null===(c=b.post)||void 0===c?void 0:c.message},u("post",{required:"Required"}))),Object(_.jsx)(we.a,Object(ve.a)({variant:"outlined",label:"Kaupunki",className:l.TextField,error:!!b.city,helperText:null===b||void 0===b||null===(r=b.city)||void 0===r?void 0:r.message},u("city",{required:"Required"})))]}),Object(_.jsx)(x.a,{variant:"outlined",className:l.submitBtn,color:"secondary",type:"submit",children:"Tilata"})]})},Ee=Object(o.a)((function(e){return{root:{display:"flex",maxWidth:380,marginBottom:20,marginRight:0},container:{backgroundColor:"#e0e0e0",height:"content",position:"relative"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},cover:{width:150},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1),flexWrap:"wrap"},bookIcon:{marginLeft:20},link:{textDecoration:"none",position:"absolute",right:0,top:0},box:{width:380},formBox:{width:450,height:620},boxWrapper:{display:"flex",justifyContent:"space-around",marginTop:80,flexWrap:"wrap",minHeight:"100vh"}}})),Ie=function(){var e=Ee(),t=Object(u.c)((function(e){return e.cart})),a=t.totalPrice,n=t.totalCount,i=t.items,c=Object(u.b)();function r(e){window.confirm("Poistaa?")&&c(function(e){return{type:N,payload:e}}(e))}function o(e){c(function(e){return{type:S,payload:e}}(e))}function d(e){c(function(e){return{type:C,payload:e}}(e))}var b=Object.keys(i).map((function(e){return i[e].items[0]}));return Object(_.jsxs)(l.a,{className:e.container,children:[Object(_.jsx)(f.b,{to:"/",className:e.link,children:Object(_.jsx)(x.a,{variant:"contained",color:"primary",children:"Back"})}),Object(_.jsx)(h.a,{component:"h2",variant:"h6",children:"Ostoskori"}),Object(_.jsxs)(h.a,{component:"h2",variant:"h6",children:["Yhteens\xe4 ",a.toFixed(2)," \u20ac"]}),Object(_.jsxs)(s.a,{className:e.boxWrapper,children:[Object(_.jsx)(s.a,{className:e.box,children:n?b.map((function(t){return Object(_.jsxs)(j.a,{className:e.root,children:[Object(_.jsx)(p.a,{className:e.cover,image:"https:".concat(t.imgSmall),title:t.title}),Object(_.jsxs)("div",{className:e.details,children:[Object(_.jsxs)(m.a,{className:e.content,children:[Object(_.jsx)(h.a,{component:"h6",variant:"h6",children:t.title}),Object(_.jsx)(h.a,{variant:"subtitle1",color:"textSecondary",children:t.author}),Object(_.jsxs)(h.a,{variant:"h6",color:"initial",children:[i[t.id].totalPrice.toFixed(2)," \u20ac"]})]}),Object(_.jsxs)("div",{className:e.controls,children:[Object(_.jsx)(H.a,{"aria-label":"minus",onClick:function(){return o(t.id)},children:Object(_.jsx)(fe.a,{})}),Object(_.jsx)(H.a,{"aria-label":"delete",onClick:function(){return r(t.id)},children:Object(_.jsx)(pe.a,{})}),Object(_.jsx)(H.a,{"aria-label":"plus",onClick:function(){return d(t.id)},children:Object(_.jsx)(Oe.a,{})}),Object(_.jsx)(z.a,{badgeContent:i[t.id].items.length,color:"primary",children:Object(_.jsx)(ye.a,{className:e.bookIcon})})]})]})]},t.id)})):""}),Object(_.jsx)(s.a,{className:e.formBox,boxShadow:2,children:Object(_.jsx)(_e,{items:i})})]})]})},Le=Object(o.a)((function(e){return{container:{backgroundColor:"#e0e0e0",height:"content"}}}));var Re=function(){var e=Le(),t=Object(u.b)(),a=Object(u.c)((function(e){return e.paginate})).currentPage,i=Object(u.c)((function(e){return e.filters.sortBy})),c=i.type,r=i.order,o=Object(u.c)((function(e){return e.books.items}));return Object(n.useEffect)((function(){t(function(e,t,a){return function(){var n=Object(oe.a)(re.a.mark((function n(i,c){return re.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i({type:y,payload:!1}),se.a.get(" http://localhost:3001/books?_page=".concat(e,"&_sort=").concat(t||"","&_order=").concat(a||"")).then((function(e){var t=e.data;i(de(t))}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(a,c,r))}),[t,a,c,r]),Object(n.useEffect)((function(){se.a.get(" http://localhost:3001/books?}").then((function(e){var a,n=e.data;t((a=n.length,{type:w,payload:a}))})).catch((function(e){return console.log(e)}))}),[t]),Object(_.jsx)(l.a,{maxWidth:"md",className:e.container,children:Object(_.jsxs)(ue.d,{children:[Object(_.jsxs)(ue.b,{exact:!0,path:"/",children:[Object(_.jsx)(Q,{}),Object(_.jsx)(ie,{onSortBy:function(e){var a=e.type,n=e.order;t(function(e,t){return{type:T,payload:{type:e,order:t}}}(a,n))}}),Object(_.jsx)(D,{items:o})]}),Object(_.jsx)(ue.b,{path:"/cart",children:Object(_.jsx)(Ie,{})}),Object(_.jsx)(ue.b,{path:"/img/:title",children:Object(_.jsx)(be,{items:o})}),Object(_.jsx)(ue.a,{to:{pathname:"/"}})]})})},qe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,367)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),i(e),c(e),r(e)}))},De=a(68),Fe=a(162),We={items:[],isLoaded:!1},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(ve.a)(Object(ve.a)({},e),{},{items:t.payload,isLoaded:!0});case y:return Object(ve.a)(Object(ve.a)({},e),{},{isLoaded:t.payload});default:return e}},Me={search:""},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return{search:t.payload};default:return e}},He={sortBy:{type:null,order:null}},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;return t.type===T?Object(ve.a)(Object(ve.a)({},e),{},{sortBy:t.payload}):e},Ue=a(10),Je=a(163),Ve={items:{},totalPrice:0,totalCount:0},$e=function(e){return e.reduce((function(e,t){return t.price+e}),0)},ze=function(e,t){return Object.values(e).reduce((function(e,a){return e+function(e,t){var a=t.split("."),n=Object(Je.a)(a),i=n[0];return n.slice(1).reduce((function(e,t){return e[t]}),e[i])}(a,t)}),0)},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:var a=e.items[t.payload.id]?[].concat(Object(Ue.a)(e.items[t.payload.id].items),[t.payload]):[t.payload],n=Object(ve.a)(Object(ve.a)({},e.items),{},Object(J.a)({},t.payload.id,{items:a,totalPrice:$e(a)})),i=ze(n,"items.length"),c=ze(n,"totalPrice");return Object(ve.a)(Object(ve.a)({},e),{},{items:n,totalCount:i,totalPrice:c});case N:var r=Object(ve.a)({},e.items),o=r[t.payload].totalPrice,l=r[t.payload].items.length;return delete r[t.payload],Object(ve.a)(Object(ve.a)({},e),{},{items:r,totalPrice:e.totalPrice-o,totalCount:e.totalCount-l});case C:var s=[].concat(Object(Ue.a)(e.items[t.payload].items),[e.items[t.payload].items[0]]),d=Object(ve.a)(Object(ve.a)({},e.items),{},Object(J.a)({},t.payload,{items:s,totalPrice:$e(s)})),u=ze(d,"items.length"),j=ze(d,"totalPrice");return Object(ve.a)(Object(ve.a)({},e),{},{items:d,totalCount:u,totalPrice:j});case S:var b=e.items[t.payload].items,m=b.length>1?e.items[t.payload].items.slice(1):b,p=Object(ve.a)(Object(ve.a)({},e.items),{},Object(J.a)({},t.payload,{items:m,totalPrice:$e(m)})),h=ze(p,"items.length"),O=ze(p,"totalPrice");return Object(ve.a)(Object(ve.a)({},e),{},{items:p,totalCount:h,totalPrice:O});default:return e}},Ye={totalItemCount:0,currentPage:1,defaultItemsCount:10},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(ve.a)(Object(ve.a)({},e),{},{totalItemCount:t.payload});case P:return Object(ve.a)(Object(ve.a)({},e),{},{currentPage:t.payload});default:return e}},Ze=Object(De.b)({books:Ae,search:Ge,filters:Ke,cart:Xe,paginate:Qe}),et=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||De.c,tt=Object(De.d)(Ze,et(Object(De.a)(Fe.a)));r.a.render(Object(_.jsx)(i.a.StrictMode,{children:Object(_.jsx)(f.a,{basename:"/IT-tietotekniikkakirjat",children:Object(_.jsx)(u.a,{store:tt,children:Object(_.jsx)(Re,{})})})}),document.getElementById("root")),qe()}},[[308,1,2]]]);
//# sourceMappingURL=main.3f0a594b.chunk.js.map